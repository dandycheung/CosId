<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>IdSegment (CosId | 通用、灵活、高性能的分布式 ID 生成器)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: me.ahoo.cosid.segment, interface: IdSegment">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<div class="about-language"><a href='https://github.com/Ahoo-Wang/CosId' target='_blank'>GitHub</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">me.ahoo.cosid.segment</a></div>
<h1 title="Interface IdSegment" class="title">Interface IdSegment</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Superinterfaces:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Comparable.html" title="class or interface in java.lang" class="external-link">Comparable</a>&lt;<a href="IdSegment.html" title="interface in me.ahoo.cosid.segment">IdSegment</a>&gt;</code>, <code><a href="grouped/Grouped.html" title="interface in me.ahoo.cosid.segment.grouped">Grouped</a></code></dd>
</dl>
<dl class="notes">
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="DefaultIdSegment.html" title="class in me.ahoo.cosid.segment">DefaultIdSegment</a></code>, <code><a href="IdSegmentChain.html" title="class in me.ahoo.cosid.segment">IdSegmentChain</a></code>, <code><a href="MergedIdSegment.html" title="class in me.ahoo.cosid.segment">MergedIdSegment</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="annotations">@ThreadSafe
</span><span class="modifiers">public interface </span><span class="element-name type-name-label">IdSegment</span><span class="extends-implements">
extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Comparable.html" title="class or interface in java.lang" class="external-link">Comparable</a>&lt;<a href="IdSegment.html" title="interface in me.ahoo.cosid.segment">IdSegment</a>&gt;, <a href="grouped/Grouped.html" title="interface in me.ahoo.cosid.segment.grouped">Grouped</a></span></div>
<div class="block">ID segment representing a contiguous block of IDs allocated for generation.
 
 <p>An ID segment is a range of IDs that has been allocated to a specific
 generator instance for local generation. It contains metadata about the
 segment's state and provides thread-safe ID allocation within the segment.
 
 <p>Key concepts:
 <ul>
   <li><strong>Offset</strong>: The starting ID of the segment</li>
   <li><strong>Max ID</strong>: The ending ID of the segment</li>
   <li><strong>Sequence</strong>: The next available ID within the segment</li>
   <li><strong>Step</strong>: The increment size for ID allocation</li>
 </ul>
 
 <p>Segments implement expiration and overflow detection to ensure proper
 lifecycle management and prevent ID conflicts.
 
 <p><img src="../doc-files/SegmentId.png" alt="SegmentId"></p>
 
 <p>Implementations of this interface are expected to be thread-safe and can be
 used concurrently across multiple threads.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final long</code></div>
<div class="col-second even-row-color"><code><a href="#SEQUENCE_OVERFLOW" class="member-name-link">SEQUENCE_OVERFLOW</a></code></div>
<div class="col-last even-row-color">
<div class="block">Special sequence value indicating overflow.</div>
</div>
<div class="col-first odd-row-color"><code>static final long</code></div>
<div class="col-second odd-row-color"><code><a href="#TIME_TO_LIVE_FOREVER" class="member-name-link">TIME_TO_LIVE_FOREVER</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Special TTL value indicating the segment never expires.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button><button id="method-summary-table-tab5" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab5', 3)" class="table-tab">Default Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#compareTo(me.ahoo.cosid.segment.IdSegment)" class="member-name-link">compareTo</a><wbr>(<a href="IdSegment.html" title="interface in me.ahoo.cosid.segment">IdSegment</a>&nbsp;other)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Compare this segment to another segment based on offset.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#ensureNextIdSegment(me.ahoo.cosid.segment.IdSegment)" class="member-name-link">ensureNextIdSegment</a><wbr>(<a href="IdSegment.html" title="interface in me.ahoo.cosid.segment">IdSegment</a>&nbsp;nextIdSegment)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Ensure that the next segment is valid relative to this segment.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getFetchTime()" class="member-name-link">getFetchTime</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Get the time when this segment was fetched.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getMaxId()" class="member-name-link">getMaxId</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Get the maximum ID in this segment.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getOffset()" class="member-name-link">getOffset</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Get the offset (starting ID) of this segment.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getSequence()" class="member-name-link">getSequence</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Get the current sequence number within this segment.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getStep()" class="member-name-link">getStep</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Get the step size for ID allocation.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#getTtl()" class="member-name-link">getTtl</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Get the time-to-live for this segment.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#incrementAndGet()" class="member-name-link">incrementAndGet</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Atomically increment the sequence and return the new value.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#isAvailable()" class="member-name-link">isAvailable</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Check if this segment is available for ID generation.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#isExpired()" class="member-name-link">isExpired</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Check if this segment has expired.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#isOverflow()" class="member-name-link">isOverflow</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Check if this segment has overflowed.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#isOverflow(long)" class="member-name-link">isOverflow</a><wbr>(long&nbsp;nextSeq)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Check if the specified sequence number represents an overflow.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-me.ahoo.cosid.segment.grouped.Grouped">Methods inherited from interface&nbsp;me.ahoo.cosid.segment.grouped.<a href="grouped/Grouped.html" title="interface in me.ahoo.cosid.segment.grouped">Grouped</a></h3>
<code><a href="grouped/Grouped.html#group()">group</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="SEQUENCE_OVERFLOW">
<h3>SEQUENCE_OVERFLOW</h3>
<div class="member-signature"><span class="modifiers">static final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">SEQUENCE_OVERFLOW</span></div>
<div class="block">Special sequence value indicating overflow.
 
 <p>This constant is used to signal that a segment has been exhausted
 and no more IDs can be allocated from it.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#me.ahoo.cosid.segment.IdSegment.SEQUENCE_OVERFLOW">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="TIME_TO_LIVE_FOREVER">
<h3>TIME_TO_LIVE_FOREVER</h3>
<div class="member-signature"><span class="modifiers">static final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">TIME_TO_LIVE_FOREVER</span></div>
<div class="block">Special TTL value indicating the segment never expires.
 
 <p>This constant is used for segments that should remain valid
 indefinitely, avoiding the need for expiration checks.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#me.ahoo.cosid.segment.IdSegment.TIME_TO_LIVE_FOREVER">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getFetchTime()">
<h3>getFetchTime</h3>
<div class="member-signature"><span class="return-type">long</span>&nbsp;<span class="element-name">getFetchTime</span>()</div>
<div class="block">Get the time when this segment was fetched.
 
 <p>This timestamp is used for expiration calculations and represents
 when the segment was allocated from the central distributor.
 
 <p>Unit: <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/TimeUnit.html#SECONDS" title="class or interface in java.util.concurrent" class="external-link"><code>TimeUnit.SECONDS</code></a></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The fetch time in seconds</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMaxId()">
<h3>getMaxId</h3>
<div class="member-signature"><span class="return-type">long</span>&nbsp;<span class="element-name">getMaxId</span>()</div>
<div class="block">Get the maximum ID in this segment.
 
 <p>This is the upper bound of the ID range allocated to this segment.
 IDs generated from this segment will not exceed this value.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The maximum ID in this segment</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getOffset()">
<h3>getOffset</h3>
<div class="member-signature"><span class="return-type">long</span>&nbsp;<span class="element-name">getOffset</span>()</div>
<div class="block">Get the offset (starting ID) of this segment.
 
 <p>This is the lower bound of the ID range allocated to this segment.
 The first ID generated from this segment will typically be this value
 or slightly higher depending on the step size.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The offset of this segment</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getSequence()">
<h3>getSequence</h3>
<div class="member-signature"><span class="return-type">long</span>&nbsp;<span class="element-name">getSequence</span>()</div>
<div class="block">Get the current sequence number within this segment.
 
 <p>This represents the next ID that will be allocated from this segment,
 or <a href="#SEQUENCE_OVERFLOW"><code>SEQUENCE_OVERFLOW</code></a> if the segment has been exhausted.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The current sequence number</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getStep()">
<h3>getStep</h3>
<div class="member-signature"><span class="return-type">long</span>&nbsp;<span class="element-name">getStep</span>()</div>
<div class="block">Get the step size for ID allocation.
 
 <p>This determines how much the sequence number is incremented each
 time an ID is allocated. A step size of 1 allocates consecutive IDs,
 while larger step sizes can be used for sharding or other purposes.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The step size for ID allocation</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getTtl()">
<h3>getTtl</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getTtl</span>()</div>
<div class="block">Get the time-to-live for this segment.
 
 <p>This determines how long the segment remains valid before it should
 be refreshed or replaced. A value of <a href="#TIME_TO_LIVE_FOREVER"><code>TIME_TO_LIVE_FOREVER</code></a>
 indicates the segment never expires.
 
 <p>Unit: <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/TimeUnit.html#SECONDS" title="class or interface in java.util.concurrent" class="external-link"><code>TimeUnit.SECONDS</code></a></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The time-to-live in seconds</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isExpired()">
<h3>isExpired</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isExpired</span>()</div>
<div class="block">Check if this segment has expired.
 
 <p>An expired segment should no longer be used for ID generation and
 should be refreshed or replaced with a new segment.
 
 <p>Segments with <a href="#TIME_TO_LIVE_FOREVER"><code>TIME_TO_LIVE_FOREVER</code></a> never expire, avoiding
 the performance cost of clock checks for permanent segments.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><code>true</code> if the segment has expired, <code>false</code> otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isOverflow()">
<h3>isOverflow</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isOverflow</span>()</div>
<div class="block">Check if this segment has overflowed.
 
 <p>An overflowed segment has exhausted its ID range and cannot allocate
 any more IDs. A new segment should be requested when this occurs.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><code>true</code> if the segment has overflowed, <code>false</code> otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isOverflow(long)">
<h3>isOverflow</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isOverflow</span><wbr><span class="parameters">(long&nbsp;nextSeq)</span></div>
<div class="block">Check if the specified sequence number represents an overflow.
 
 <p>This method checks if a specific sequence number indicates that
 the segment has been exhausted, either by matching the overflow
 constant or by exceeding the maximum ID.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>nextSeq</code> - The sequence number to check</dd>
<dt>Returns:</dt>
<dd><code>true</code> if the sequence number indicates overflow, <code>false</code> otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isAvailable()">
<h3>isAvailable</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isAvailable</span>()</div>
<div class="block">Check if this segment is available for ID generation.
 
 <p>A segment is available if it has not expired and has not overflowed.
 Available segments can be used for generating new IDs.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><code>true</code> if the segment is available, <code>false</code> otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="incrementAndGet()">
<h3>incrementAndGet</h3>
<div class="member-signature"><span class="return-type">long</span>&nbsp;<span class="element-name">incrementAndGet</span>()</div>
<div class="block">Atomically increment the sequence and return the new value.
 
 <p>This method provides thread-safe allocation of the next ID from
 this segment. If the segment has been exhausted, it returns
 <a href="#SEQUENCE_OVERFLOW"><code>SEQUENCE_OVERFLOW</code></a>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The next allocated ID, or <a href="#SEQUENCE_OVERFLOW"><code>SEQUENCE_OVERFLOW</code></a> if exhausted</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="compareTo(me.ahoo.cosid.segment.IdSegment)">
<h3>compareTo</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">compareTo</span><wbr><span class="parameters">(<a href="IdSegment.html" title="interface in me.ahoo.cosid.segment">IdSegment</a>&nbsp;other)</span></div>
<div class="block">Compare this segment to another segment based on offset.
 
 <p>Segments are ordered by their offset values, which represents
 their position in the global ID space. This ordering is used to
 ensure proper sequence of segments and detect expired segments.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Comparable.html#compareTo(T)" title="class or interface in java.lang" class="external-link">compareTo</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Comparable.html" title="class or interface in java.lang" class="external-link">Comparable</a>&lt;<a href="IdSegment.html" title="interface in me.ahoo.cosid.segment">IdSegment</a>&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>other</code> - The segment to compare to</dd>
<dt>Returns:</dt>
<dd>A negative integer, zero, or a positive integer as this
         segment's offset is less than, equal to, or greater than
         the specified segment's offset</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="ensureNextIdSegment(me.ahoo.cosid.segment.IdSegment)">
<h3>ensureNextIdSegment</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">ensureNextIdSegment</span><wbr><span class="parameters">(<a href="IdSegment.html" title="interface in me.ahoo.cosid.segment">IdSegment</a>&nbsp;nextIdSegment)</span>
                          throws <span class="exceptions"><a href="NextIdSegmentExpiredException.html" title="class in me.ahoo.cosid.segment">NextIdSegmentExpiredException</a></span></div>
<div class="block">Ensure that the next segment is valid relative to this segment.
 
 <p>This method validates that the next segment has a higher offset
 than this segment, preventing the use of expired or duplicate segments
 that could cause ID conflicts.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>nextIdSegment</code> - The next segment to validate</dd>
<dt>Throws:</dt>
<dd><code><a href="NextIdSegmentExpiredException.html" title="class in me.ahoo.cosid.segment">NextIdSegmentExpiredException</a></code> - if the next segment is invalid</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
